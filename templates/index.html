<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Whisper + TTS Demo</title>
<style>
body { font-family: Arial; margin: 40px; }
video { display: block; margin: 20px 0; width: 600px; }
input, select, button { margin: 5px; padding: 5px; }
</style>
</head>
<body>
<h1>Whisper + TTS Demo</h1>
<form id="uploadForm">
<input type="file" id="videoFile" required>
<select id="langSelect">
<option value="ko">한국어</option>
<option value="en">English</option>
<option value="ja">日本語</option>
</select>
<button type="submit">업로드</button>
</form>

<video id="video" controls></video>
<track id="subTrack" kind="subtitles" srclang="ko" default>
<audio id="ttsAudio" controls></audio>

<script>
const form = document.getElementById("uploadForm");
const video = document.getElementById("video");
const track = document.getElementById("subTrack");
const ttsAudio = document.getElementById("ttsAudio");

form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const file = document.getElementById("videoFile").files[0];
    const lang = document.getElementById("langSelect").value;
    const formData = new FormData();
    formData.append("file", file);
    formData.append("lang", lang);

    const res = await fetch("/upload/", { method: "POST", body: formData });
    const data = await res.json();

    video.src = "/" + data.video;
    track.src = "/" + data.srt;
    track.srclang = lang;
    ttsAudio.src = "/" + data.tts;
});
</script>
</body>
</html>
